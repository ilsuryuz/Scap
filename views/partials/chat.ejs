<!-- Chatbox HTML and needed Scripts -->
<% if (currentUser) { %> 
<div class="chatbox">
    <ul class="list-group" id="messages"></ul>
</div>
<div>
    <form class="chatForm" action="">
        <input type="text" name="" id="m" placeholder="Enter the message..." value=""
            required="required"></input>
        <input type="submit" value="Send">
    </form>
</div>
<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.socket.io/4.5.0/socket.io.min.js"
    integrity="sha384-7EyYLQZgWBi67fBtVxw60/OWl1kjsfrPFcaU0pp0nAh+i8FD068QogUvg85Ewy1k"
    crossorigin="anonymous"></script>
<script>
    // ** Communication between Server and Client **
    const socket = io();
    $('.chatForm').submit(function () {
        const msg = $('#m').val();
        if (msg.length > 0)
            socket.emit('chat message', msg);
        else
            console.log("Enter a valid msg :)");
        $('#m').val("");
        return false;
    });
    socket.on('chat message', function (msg) {
        $("#messages").append('<li class="list-group-item">' + '<h4>' + msg.username + '</h4>' + '<p>' + msg.message + '</p>' + '</li>');
    });
</script>
<% } %> 